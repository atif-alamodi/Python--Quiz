/* ==========================================================
   STA104 Quiz โ 40 Questions (MCQ + True/False only)
   โ NO text/essay questions (ุญูููุช 31โ40 ุฅูู ุงุฎุชูุงุฑุงุช)
   โ Instant correction + colors + explanation
   โ Score shown first after each answer + final score
   โ Anonymous: Session Code only
   ----------------------------------------------------------
   Requires in index.html:
   #question  #answers  #result  #nextBtn
   ========================================================== */

"use strict";

document.addEventListener("DOMContentLoaded", function () {
  var elQuestion = document.getElementById("question");
  var elAnswers = document.getElementById("answers");
  var elResult = document.getElementById("result");
  var btnNext = document.getElementById("nextBtn");

  if (!elQuestion || !elAnswers || !elResult || !btnNext) {
    document.body.innerHTML =
      '<div style="direction:rtl;font-family:Arial;padding:16px;line-height:1.8">' +
      "<h2>ุฎุทุฃ ูู index.html</h2>" +
      "<p>ุชุฃูุฏ ูู ูุฌูุฏ ุงูุนูุงุตุฑ ุงูุชุงููุฉ ุจุงูู IDs:</p>" +
      '<pre style="background:#111;color:#fff;padding:12px;border-radius:10px">' +
      "#question\n#answers\n#result\n#nextBtn" +
      "</pre></div>";
    return;
  }

  // Anonymous session code
  var sessionCode = "S-" + Math.random().toString(36).slice(2, 8).toUpperCase();

  // =========================
  // Questions (40) โ MCQ + T/F
  // =========================
  var questions = [
    // ---------- MCQ (1โ20) ----------
    {
      q: "ุนูู ุงูุฅุญุตุงุก ูู ุงูุนูู ุงูุฐู ููุชู ุจู:",
      choices: ["ุชุตููู ุงูููุงูุน", "ุฌูุน ูุชูุธูู ูุชุญููู ุงูุจูุงูุงุช", "ุงูุจุฑูุฌุฉ ููุท", "ุฅุฏุงุฑุฉ ุงููุดุงุฑูุน"],
      correct: 1,
      explain: "ุงูุฅุญุตุงุก ููุชู ุจุฌูุน ุงูุจูุงูุงุช ูุชูุธูููุง ูุชุญููููุง ูููุตูู ุฅูู ูุชุงุฆุฌ ูููุฏุฉ."
    },
    {
      q: "ูู ูุธุงุฆู ุนูู ุงูุฅุญุตุงุก:",
      choices: ["ูุดุฑ ุงููุชุงุฆุฌ", "ุชูุณูุฑ ุงููุชุงุฆุฌ", "ุชุญููู ุงูุจูุงูุงุช", "ุฌููุน ูุง ุณุจู"],
      correct: 3,
      explain: "ูุดูู ุงูุฅุญุตุงุก ุชุญููู ุงูุจูุงูุงุช ูุชูุณูุฑ ุงููุชุงุฆุฌ ูุนุฑุถูุง/ูุดุฑูุง."
    },
    {
      q: "ุงููุฌุชูุน ุงูุฅุญุตุงุฆู ูุชููุฒ ุจู:",
      choices: ["ุนุฏุฏ ุบูุฑ ูุญุฏุฏ ูู ุงูุฃูุฑุงุฏ", "ุนุฏุฏ ูุนุฑูู ูู ุงูุฃูุฑุงุฏ N", "ูุง ูุญุชูู ุนูู ุตูุงุช", "ูุง ูุณุชุฎุฏู ูู ุงูุฏุฑุงุณุงุช"],
      correct: 1,
      explain: "ุงููุฌุชูุน ุงูุฅุญุตุงุฆู ุบุงูุจูุง ููุฑูุฒ ูุญุฌูู ุจู N ููููุชุฑุถ ุฃูู ูุนุฑูู/ูุญุฏุฏ ุถูู ุงูุฏุฑุงุณุฉ."
    },
    {
      q: "ุงูุนููุฉ ูู:",
      choices: ["ุฌููุน ุฃูุฑุงุฏ ุงููุฌุชูุน", "ุฌุฒุก ูู ุงููุฌุชูุน", "ุฃูุจุฑ ูู ุงููุฌุชูุน", "ูุง ุนูุงูุฉ ููุง ุจุงููุฌุชูุน"],
      correct: 1,
      explain: "ุงูุนููุฉ ุฌุฒุก ูู ุงููุฌุชูุน ูุณุชุฎุฏูู ููุงุณุชุฏูุงู ุนูู ุฎุตุงุฆุต ุงููุฌุชูุน."
    },
    {
      q: "ุฃู ููุง ููู ูุนุฏ ูุชุบูุฑูุง ููููุงุ",
      choices: ["ุงูููู", "ุงูุฌูุณ", "ุงูุทูู", "ุงููููุฉ"],
      correct: 2,
      explain: "ุงูุทูู ูููุฉ ุฑูููุฉ ูุงุจูุฉ ููููุงุณ โ ูุชุบูุฑ ููู."
    },
    {
      q: "ุฃู ููุง ููู ูุนุฏ ูุชุบูุฑูุง ููุนููุงุ",
      choices: ["ุงููุฒู", "ุนุฏุฏ ุงูุทูุงุจ", "ุฏุฑุฌุฉ ุงูุญุฑุงุฑุฉ", "ุงููููุฉ"],
      correct: 3,
      explain: "ุงููููุฉ ุชุตููู/ูุฆุฉ โ ูุชุบูุฑ ููุนู."
    },
    {
      q: "ุงููุชูุณุท ุงูุญุณุงุจู ููุญุณุจ ุนู ุทุฑูู:",
      choices: ["ุฃูุจุฑ ูููุฉ ูุงูุต ุฃุตุบุฑ ูููุฉ", "ูุฌููุน ุงูููู รท ุนุฏุฏูุง", "ุงููููุฉ ุงูุฃูุซุฑ ุชูุฑุงุฑูุง", "ุงููููุฉ ุงููุณุทู"],
      correct: 1,
      explain: "ุงููุชูุณุท = ูุฌููุน ุงูููู / ุนุฏุฏ ุงูููู."
    },
    {
      q: "ุงููุณูุท ูู:",
      choices: ["ุงููููุฉ ุงูุฃูุซุฑ ุชูุฑุงุฑูุง", "ุงููููุฉ ุงููุชูุณุทุฉ ุจุนุฏ ุชุฑุชูุจ ุงูุจูุงูุงุช", "ูุฌููุน ุงูููู", "ุฃุตุบุฑ ูููุฉ"],
      correct: 1,
      explain: "ุงููุณูุท ูู ุงููููุฉ ุงูุชู ุชูุน ูู ุงููุณุท ุจุนุฏ ุชุฑุชูุจ ุงูุจูุงูุงุช."
    },
    {
      q: "ุงููููุงู ูู:",
      choices: ["ุงููููุฉ ุงููุชูุณุทุฉ", "ุงููููุฉ ุงูุฃูุซุฑ ุชูุฑุงุฑูุง", "ุงููุฑู ุจูู ุงูููู", "ูุฌููุน ุงูุงูุญุฑุงูุงุช"],
      correct: 1,
      explain: "ุงููููุงู ูู ุฃูุซุฑ ูููุฉ ุชุชูุฑุฑ."
    },
    {
      q: "ูู ุนููุจ ุงููุชูุณุท ุงูุญุณุงุจู:",
      choices: ["ูุง ูุชุฃุซุฑ ุจุงูููู ุงูุดุงุฐุฉ", "ูุชุฃุซุฑ ุจุงูููู ุงููุชุทุฑูุฉ", "ูุง ูููู ุญุณุงุจู", "ูุง ูุณุชุฎุฏู ูู ุงูููุงุฑูุงุช"],
      correct: 1,
      explain: "ุงููุชูุณุท ูุชุฃุซุฑ ุจุงูููู ุงููุชุทุฑูุฉ (Outliers)."
    },
    {
      q: "ุงููุฏู ูุณุงูู:",
      choices: ["ุงููุชูุณุท ร ุงูุนุฏุฏ", "ุฃูุจุฑ ูููุฉ โ ุฃุตุบุฑ ูููุฉ", "ูุฌููุน ุงูููู", "ุงูุฌุฐุฑ ุงูุชุฑุจูุนู ูููุชูุณุท"],
      correct: 1,
      explain: "ุงููุฏู = Max โ Min."
    },
    {
      q: "ุงูุชุจุงูู ูููุณ:",
      choices: ["ูููุน ุงูุจูุงูุงุช", "ุชุดุชุช ุงูุจูุงูุงุช ุญูู ุงููุชูุณุท", "ุฃูุจุฑ ูููุฉ", "ุฃุตุบุฑ ูููุฉ"],
      correct: 1,
      explain: "ุงูุชุจุงูู ูููุณ ูุฏู ุชุดุชุช ุงูุจูุงูุงุช ุญูู ุงููุชูุณุท."
    },
    {
      q: "ุงูุงูุญุฑุงู ุงููุนูุงุฑู ูู:",
      choices: ["ูุฑุจุน ุงูุชุจุงูู", "ูุตู ุงูุชุจุงูู", "ุงูุฌุฐุฑ ุงูุชุฑุจูุนู ููุชุจุงูู", "ุถุนู ุงููุชูุณุท"],
      correct: 2,
      explain: "ุงูุงูุญุฑุงู ุงููุนูุงุฑู = โุงูุชุจุงูู."
    },
    {
      q: "ุฅุฐุง ูุงูุช ูููุฉ Z ููุฌุจุฉ ููุฐุง ูุนูู ุฃู ุงููููุฉ:",
      choices: ["ุฃูู ูู ุงููุชูุณุท", "ุชุณุงูู ุงููุชูุณุท", "ุฃูุจุฑ ูู ุงููุชูุณุท", "ุณุงูุจุฉ"],
      correct: 2,
      explain: "Z ููุฌุจุฉ โ ุงููููุฉ ุฃุนูู ูู ุงููุชูุณุท."
    },
    {
      q: "ุงููุฏุฑุฌ ุงูุชูุฑุงุฑู ูุณุชุฎุฏู ูุนุฑุถ:",
      choices: ["ุงูุจูุงูุงุช ุงูููุนูุฉ", "ุงูุจูุงูุงุช ุงููููุฉ ุงููุณุชูุฑุฉ", "ุงููุตูุต", "ุงูุตูุฑ"],
      correct: 1,
      explain: "Histogram ููุงุณุจ ููุจูุงูุงุช ุงููููุฉ ุงููุณุชูุฑุฉ/ุงููุฌูุนุฉ ูู ูุฆุงุช."
    },
    {
      q: "ูู ุงููุฏุฑุฌ ุงูุชูุฑุงุฑู ุชููู ุงูุฃุนูุฏุฉ:",
      choices: ["ูููุตูุฉ", "ูุชุจุงุนุฏุฉ", "ูุชูุงุตูุฉ", "ุนุดูุงุฆูุฉ"],
      correct: 2,
      explain: "ุฃุนูุฏุฉ ุงููุฏุฑุฌ ุงูุชูุฑุงุฑู ูุชูุงุตูุฉ ูุฃููุง ุชูุซู ูุฆุงุช ูุชุตูุฉ."
    },
    {
      q: "ุงููุฎุทุท ุงูุดุฑูุทู ูุณุชุฎุฏู ุบุงูุจูุง ูุนุฑุถ:",
      choices: ["ุงูุจูุงูุงุช ุงูููุนูุฉ", "ุงูุจูุงูุงุช ุงููุณุชูุฑุฉ ููุท", "ุงูุนูุงูุงุช ุจูู ูุชุบูุฑูู ููููู", "ุงูุงูุญุฑุงู ุงููุนูุงุฑู"],
      correct: 0,
      explain: "Bar Chart ุบุงูุจูุง ููุจูุงูุงุช ุงูููุนูุฉ/ุงููุฆุงุช."
    },
    {
      q: "ูุฎุทุท ุงูุชุดุชุช ูุณุชุฎุฏู ูุจูุงู:",
      choices: ["ุงููุชูุณุท", "ุงูุนูุงูุฉ ุจูู ูุชุบูุฑูู", "ุงูุชูุฑุงุฑ", "ุงููููุงู"],
      correct: 1,
      explain: "Scatter Plot ููุถุญ ุงูุนูุงูุฉ ุจูู ูุชุบูุฑูู (ุนุงุฏุฉ ููููู)."
    },
    {
      q: "ุฅุฐุง ูุงูุช ุงูููุงุท ูู ูุฎุทุท ุงูุชุดุชุช ุชุชุฌู ูู ุฃุณูู ุงููุณุงุฑ ุฅูู ุฃุนูู ุงููููู ูุงูุนูุงูุฉ:",
      choices: ["ุนูุณูุฉ", "ุทุฑุฏูุฉ", "ูุง ุชูุฌุฏ ุนูุงูุฉ", "ุฏุงุฆุฑูุฉ"],
      correct: 1,
      explain: "ุงุชุฌุงู ุตุงุนุฏ ูุนูู ุนูุงูุฉ ุทุฑุฏูุฉ (ููุฌุจุฉ)."
    },
    {
      q: "ุฅุฐุง ูุงู ุงูุงูุญุฑุงู ุงููุนูุงุฑู ุตุบูุฑูุง ููุฐุง ูุฏู ุนูู:",
      choices: ["ุชุดุชุช ูุจูุฑ", "ุนุฏู ูุฌูุฏ ุจูุงูุงุช", "ุชุฌุงูุณ ุงูุจูุงูุงุช", "ุฎุทุฃ ูู ุงูุญุณุงุจ"],
      correct: 2,
      explain: "ุงูุญุฑุงู ูุนูุงุฑู ุตุบูุฑ โ ุงูุจูุงูุงุช ูุชูุงุฑุจุฉ/ูุชุฌุงูุณุฉ."
    },

    // ---------- True/False (21โ30) ----------
    {
      q: "ุฌููุน ุงูุนููู ุชุญุชุงุฌ ุฅูู ุงูุฅุญุตุงุก ูุชุญููู ุงูุจูุงูุงุช.",
      choices: ["ุตุญ", "ุฎุทุฃ"],
      correct: 0,
      explain: "ุงูุฅุญุตุงุก ุฃุฏุงุฉ ุฃุณุงุณูุฉ ูู ูุซูุฑ ูู ุงููุฌุงูุงุช ูุชุญููู ุงูุจูุงูุงุช ูุงุชุฎุงุฐ ุงููุฑุงุฑ."
    },
    {
      q: "ุงููุชูุณุท ุงูุญุณุงุจู ูุง ูุชุฃุซุฑ ุจุงูููู ุงูุดุงุฐุฉ.",
      choices: ["ุตุญ", "ุฎุทุฃ"],
      correct: 1,
      explain: "ุฎุทุฃ: ุงููุชูุณุท ูุชุฃุซุฑ ุจุงูููู ุงููุชุทุฑูุฉ/ุงูุดุงุฐุฉ."
    },
    {
      q: "ุงููุณูุท ููุงุณุจ ุนูุฏ ูุฌูุฏ ููู ูุชุทุฑูุฉ.",
      choices: ["ุตุญ", "ุฎุทุฃ"],
      correct: 0,
      explain: "ุตุญ: ุงููุณูุท ุฃูุซุฑ ููุงููุฉ ููููู ุงููุชุทุฑูุฉ ูู ุงููุชูุณุท."
    },
    {
      q: "ุงููุฏู ูุนุชูุฏ ููุท ุนูู ุฃูุจุฑ ูุฃุตุบุฑ ูููุฉ.",
      choices: ["ุตุญ", "ุฎุทุฃ"],
      correct: 0,
      explain: "ุตุญ: ุงููุฏู = ุฃูุจุฑ ูููุฉ โ ุฃุตุบุฑ ูููุฉ."
    },
    {
      q: "ุงูุชุจุงูู ูุญุฏุชู ููุณ ูุญุฏุฉ ุงูุจูุงูุงุช ุงูุฃุตููุฉ.",
      choices: ["ุตุญ", "ุฎุทุฃ"],
      correct: 1,
      explain: "ุฎุทุฃ: ุงูุชุจุงูู ุจูุญุฏุฉ ูุฑุจุนุฉ (ูุญุฏุฉ ุงูุจูุงูุงุช)^2."
    },
    {
      q: "ุงูุงูุญุฑุงู ุงููุนูุงุฑู ุฃุณูู ูู ุงูุชูุณูุฑ ูู ุงูุชุจุงูู.",
      choices: ["ุตุญ", "ุฎุทุฃ"],
      correct: 0,
      explain: "ุตุญ: ูุฃูู ุจููุณ ูุญุฏุฉ ุงูุจูุงูุงุช ุงูุฃุตููุฉ."
    },
    {
      q: "ูู ุงููุฎุทุท ุงูุดุฑูุทู ุชูุฌุฏ ูุณุงูุงุช ุจูู ุงูุฃุนูุฏุฉ.",
      choices: ["ุตุญ", "ุฎุทุฃ"],
      correct: 0,
      explain: "ุตุญ: ุงูุฃุนูุฏุฉ ูููุตูุฉ ุนุงุฏุฉ ูุฃููุง ุชูุซู ูุฆุงุช."
    },
    {
      q: "ุงููุฏุฑุฌ ุงูุชูุฑุงุฑู ูุณุชุฎุฏู ููุจูุงูุงุช ุงููููุฉ ุงููุณุชูุฑุฉ.",
      choices: ["ุตุญ", "ุฎุทุฃ"],
      correct: 0,
      explain: "ุตุญ: ุงููุฏุฑุฌ ุงูุชูุฑุงุฑู ููุจูุงูุงุช ุงููุณุชูุฑุฉ/ุงููุฌูุนุฉ ูู ูุฆุงุช."
    },
    {
      q: "ูููุฉ Z = 0 ุชุนูู ุฃู ุงููููุฉ ุชุณุงูู ุงููุชูุณุท.",
      choices: ["ุตุญ", "ุฎุทุฃ"],
      correct: 0,
      explain: "ุตุญ: Z=0 ูุนูู (x-mean)=0 ุฃู x=mean."
    },
    {
      q: "ุฅุฐุง ูุงู ุงูุชุจุงูู ูุจูุฑูุง ูุฅู ุงูุจูุงูุงุช ูุชูุงุฑุจุฉ.",
      choices: ["ุตุญ", "ุฎุทุฃ"],
      correct: 1,
      explain: "ุฎุทุฃ: ุงูุชุจุงูู ุงููุจูุฑ ูุนูู ุชุดุชุช ุฃูุจุฑ."
    },

    // ---------- Converted (31โ40) to MCQ only ----------
    {
      q: "ุฃูุถู ุชุนุฑูู ูุฎุชุตุฑ ูุนูู ุงูุฅุญุตุงุก ูู:",
      choices: [
        "ุนูู ุชุตููู ุงูููุงูุน",
        "ุนูู ุฌูุน ูุชูุธูู ูุชุญููู ูุชูุณูุฑ ุงูุจูุงูุงุช",
        "ุนูู ูุชุงุจุฉ ุงูุจุฑุงูุฌ",
        "ุนูู ุจูุงุก ููุงุนุฏ ุงูุจูุงูุงุช ููุท"
      ],
      correct: 1,
      explain: "ุงูุชุนุฑูู ุงูุฃุดูู: ุฌูุน ูุชูุธูู ูุชุญููู ูุชูุณูุฑ ุงูุจูุงูุงุช."
    },
    {
      q: "ุฃู ุฎูุงุฑ ููุซู ูุตุฏุฑูู ุดุงุฆุนูู ููุญุตูู ุนูู ุงูุจูุงูุงุชุ",
      choices: [
        "ุงูุชุฌุงุฑุจ ูุงููุณูุญุงุช",
        "ุงูุทุงุจุนุฉ ูุงูุณูุงุนุงุช",
        "ุงูููู ูุงูุทูู",
        "ุงููุชูุณุท ูุงููููุงู"
      ],
      correct: 0,
      explain: "ุงูุจูุงูุงุช ุชูุฌูุน ุบุงูุจูุง ุนุจุฑ ูุณูุญ/ุงุณุชุจูุงูุงุช ุฃู ุชุฌุงุฑุจ ุฃู ุณุฌูุงุช."
    },
    {
      q: "ุฃู ุฒูุฌ ููุนุฏ ูู ุฃููุงุน ุงูุนููุงุช ุงูุนุดูุงุฆูุฉุ",
      choices: [
        "ุงูุนููุฉ ุงูุนุดูุงุฆูุฉ ุงูุจุณูุทุฉ ูุงูุนููุฉ ุงูุทุจููุฉ",
        "ุงูุนููุฉ ุงููุตุฏูุฉ ูุงูุนููุฉ ุงููุฑูุญุฉ",
        "ุงูุนููุฉ ุงูุดุฎุตูุฉ ูุงูุนููุฉ ุงูุฅุนูุงููุฉ",
        "ุนููุฉ ุงูุตูุฑ ูุนููุฉ ุงููุตูุต"
      ],
      correct: 0,
      explain: "ูู ุฃุดูุฑ ุงูุนููุงุช ุงูุนุดูุงุฆูุฉ: ุจุณูุทุฉุ ุทุจููุฉุ ุนูููุฏูุฉุ ููุชุธูุฉ."
    },
    {
      q: "ุงููุฑู ุงูุตุญูุญ ุจูู ุงููุฌุชูุน ูุงูุนููุฉ ูู:",
      choices: [
        "ุงูุนููุฉ ุฃูุจุฑ ูู ุงููุฌุชูุน",
        "ุงููุฌุชูุน ุฌุฒุก ูู ุงูุนููุฉ",
        "ุงููุฌุชูุน ูู ุงูุฃูุฑุงุฏุ ูุงูุนููุฉ ุฌุฒุก ููุซู ููู",
        "ูุง ููุฌุฏ ูุฑู"
      ],
      correct: 2,
      explain: "ุงููุฌุชูุน = ูู ุงูุฃูุฑุงุฏ/ุงูุนูุงุตุฑุ ุงูุนููุฉ = ุฌุฒุก ููุซู."
    },
    {
      q: "ุฅุฐุง ูุงูุช ุงูููู: 5 ุ 7 ุ 9 ูุฅู ุงููุชูุณุท ุงูุญุณุงุจู ูุณุงูู:",
      choices: ["7", "8", "6", "9"],
      correct: 0,
      explain: "ุงููุชูุณุท = (5+7+9)/3 = 21/3 = 7."
    },
    {
      q: "ุฅุฐุง ูุงูุช ุงูููู: 2 ุ 4 ุ 6 ุ 8 ูุฅู ุงููุณูุท ูุณุงูู:",
      choices: ["4", "6", "5", "8"],
      correct: 2,
      explain: "ุนุฏุฏ ุงูููู ุฒูุฌู โ ุงููุณูุท = (4+6)/2 = 5."
    },
    {
      q: "ุฅุฐุง ูุงูุช ุงูููู: 3 ุ 3 ุ 5 ุ 7 ูุฅู ุงููููุงู ูุณุงูู:",
      choices: ["3", "5", "7", "ูุง ููุฌุฏ ูููุงู"],
      correct: 0,
      explain: "ุงููููุฉ ุงูุฃูุซุฑ ุชูุฑุงุฑูุง ูู 3."
    },
    {
      q: "ุฅุฐุง ูุงูุช ุฃุตุบุฑ ูููุฉ = 10 ูุฃูุจุฑ ูููุฉ = 25 ูุฅู ุงููุฏู ูุณุงูู:",
      choices: ["15", "35", "25", "10"],
      correct: 0,
      explain: "ุงููุฏู = 25 โ 10 = 15."
    },
    {
      q: "ุงููุฏู ุงูุฃุณุงุณู ูู ุงุณุชุฎุฏุงู ูุฎุทุท ุงูุชุดุชุช ูู:",
      choices: [
        "ุฅูุฌุงุฏ ุงููููุงู",
        "ุจูุงู ุงูุนูุงูุฉ ุจูู ูุชุบูุฑูู",
        "ุญุณุงุจ ุงูุงูุญุฑุงู ุงููุนูุงุฑู",
        "ุนุฑุถ ุจูุงูุงุช ููุนูุฉ ููุท"
      ],
      correct: 1,
      explain: "ูุฎุทุท ุงูุชุดุชุช ููุถุญ ุดูู/ุงุชุฌุงู ุงูุนูุงูุฉ ุจูู ูุชุบูุฑูู."
    },
    {
      q: "ุฃู ุฎูุงุฑ ููุซู ุดูููู ุดุงุฆุนูู ููุชูุฒูุนุงุช ุงูุชู ุชูุฏุฑุณ ุนุงุฏุฉุ",
      choices: [
        "ูุชูุงุซู ูููุญุฑู",
        "ูุฑุจุน ููุซูุซ",
        "ุฃุญูุฑ ูุฃุฒุฑู",
        "ุทุงุจุนุฉ ููุงูุณ"
      ],
      correct: 0,
      explain: "ูู ุงูุฃุดูุงู ุงูุดุงุฆุนุฉ: ุชูุฒูุน ูุชูุงุซู (Symmetric) ูุชูุฒูุน ููุญุฑู (Skewed)."
    }
  ];

  // ===== Quiz State =====
  var currentIndex = 0;
  var score = 0;
  var answered = false;

  // ===== Helpers =====
  function escapeHtml(s) {
    return String(s).replace(/[&<>"']/g, function (ch) {
      if (ch === "&") return "&amp;";
      if (ch === "<") return "&lt;";
      if (ch === ">") return "&gt;";
      if (ch === '"') return "&quot;";
      if (ch === "'") return "&#039;";
      return ch;
    });
  }

  function styleBtn(btn, state) {
    btn.style.transition = "all .15s ease";
    btn.style.borderRadius = "10px";
    btn.style.border = "1px solid rgba(255,255,255,.18)";
    btn.style.background = "rgba(255,255,255,.06)";
    btn.style.color = "#fff";
    btn.style.padding = "12px 14px";
    btn.style.margin = "10px 0";
    btn.style.width = "100%";
    btn.style.textAlign = "right";
    btn.style.cursor = "pointer";
    btn.style.fontSize = "1rem";

    if (state === "correct") {
      btn.style.background = "rgba(46, 204, 113, .25)";
      btn.style.border = "1px solid rgba(46, 204, 113, .75)";
    } else if (state === "wrong") {
      btn.style.background = "rgba(231, 76, 60, .25)";
      btn.style.border = "1px solid rgba(231, 76, 60, .75)";
    }
  }

  // ===== Render =====
  function renderQuestion() {
    answered = false;
    btnNext.disabled = true;

    var q = questions[currentIndex];

    elAnswers.innerHTML = "";

    elQuestion.innerHTML =
      '<div style="text-align:right;">' +
      "<strong>ุณุคุงู " +
      (currentIndex + 1) +
      " ูู " +
      questions.length +
      ":</strong> " +
      escapeHtml(q.q) +
      "</div>";

    elResult.innerHTML =
      '<div style="text-align:right; line-height:1.9;">' +
      '<div style="font-size:18px;"><strong>ุงูุฏุฑุฌุฉ:</strong> ' +
      score +
      " / " +
      questions.length +
      "</div>" +
      '<div style="opacity:.85;">ุงุฎุชุฑ ุฅุฌุงุจุฉ ูุนุฑุถ ุงูุชุตุญูุญ ูุงูุดุฑุญ.</div>' +
      '<div style="opacity:.85; margin-top:6px;">ุฑูุฒ ุงูุฌูุณุฉ: <strong>' +
      sessionCode +
      "</strong></div>" +
      "</div>";

    for (var i = 0; i < q.choices.length; i++) {
      (function (idx) {
        var btn = document.createElement("button");
        btn.type = "button";
        btn.textContent = q.choices[idx];
        styleBtn(btn, "neutral");
        btn.addEventListener("click", function () {
          handleAnswer(idx);
        });
        elAnswers.appendChild(btn);
      })(i);
    }

    btnNext.textContent =
      currentIndex === questions.length - 1 ? "ุนุฑุถ ุงููุชูุฌุฉ ุงูููุงุฆูุฉ" : "ุงูุณุคุงู ุงูุชุงูู";
  }

  function handleAnswer(selectedIdx) {
    if (answered) return;
    answered = true;

    var q = questions[currentIndex];
    var correctIdx = q.correct;

    var buttons = elAnswers.querySelectorAll("button");
    for (var i = 0; i < buttons.length; i++) {
      buttons[i].disabled = true;
      styleBtn(buttons[i], "neutral");
      if (i === correctIdx) styleBtn(buttons[i], "correct");
      if (i === selectedIdx && i !== correctIdx) styleBtn(buttons[i], "wrong");
    }

    var isCorrect = selectedIdx === correctIdx;
    if (isCorrect) score++;

    elResult.innerHTML =
      '<div style="text-align:right; line-height:1.95; padding:12px; border-radius:12px;' +
      'border:1px solid rgba(255,255,255,.18); background:rgba(255,255,255,.06);">' +
      '<div style="font-size:18px;"><strong>ุงูุฏุฑุฌุฉ:</strong> ' +
      score +
      " / " +
      questions.length +
      "</div>" +
      '<div style="margin-top:6px;"><strong>ุงููุชูุฌุฉ:</strong> ' +
      (isCorrect ? "โ ุฅุฌุงุจุฉ ุตุญูุญุฉ" : "โ ุฅุฌุงุจุฉ ุฎุงุทุฆุฉ") +
      "</div>" +
      '<div style="margin-top:10px;"><strong>ุงูุฅุฌุงุจุฉ ุงูุตุญูุญุฉ:</strong> ' +
      escapeHtml(q.choices[correctIdx]) +
      "</div>" +
      '<div style="margin-top:10px;"><strong>ุงูุดุฑุญ:</strong> ' +
      escapeHtml(q.explain) +
      "</div>" +
      '<div style="margin-top:8px; opacity:.85;"><strong>ุฑูุฒ ุงูุฌูุณุฉ:</strong> ' +
      sessionCode +
      "</div>" +
      "</div>";

    btnNext.disabled = false;
  }

  function showFinal() {
    elQuestion.innerHTML = "<strong>ุงูุชูู ุงูุงุฎุชุจุงุฑ ๐</strong>";
    elAnswers.innerHTML = "";
    btnNext.style.display = "none";

    var percent = Math.round((score / questions.length) * 100);

    elResult.innerHTML =
      '<div style="text-align:center; line-height:2; padding:14px; border-radius:12px;' +
      'border:1px solid rgba(255,255,255,.18); background:rgba(255,255,255,.06);">' +
      '<div style="font-size:20px;"><strong>ุงูุฏุฑุฌุฉ ุงูููุงุฆูุฉ</strong></div>' +
      '<div style="font-size:34px; margin:6px 0;"><strong>' +
      score +
      " / " +
      questions.length +
      "</strong></div>" +
      '<div style="font-size:18px;">' +
      percent +
      "%</div>" +
      '<div style="margin-top:10px; opacity:.9;">ุฑูุฒ ุงูุฌูุณุฉ: <strong>' +
      sessionCode +
      "</strong></div>" +
      "</div>";
  }

  btnNext.addEventListener("click", function () {
    if (!answered) return;

    if (currentIndex === questions.length - 1) {
      showFinal();
      return;
    }

    currentIndex++;
    renderQuestion();
  });

  // Start
  renderQuestion();
});
```๎จ0๎จ
